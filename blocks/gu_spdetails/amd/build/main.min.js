define(["core/ajax"],function(r){var a=t=>{var s=document.getElementById("current_tab"),e=document.getElementById("past_tab"),a=document.getElementById("sortby_course"),c=document.getElementById("sortby_date"),r=document.getElementById("sortby_startdate"),d=document.getElementById("sortby_enddate");switch(t.target){case s:var o="current",l=0,i="course",u="asc";s.classList.add("active"),e.classList.remove("active"),n(o,l,i,u);break;case e:var o="past",l=0,i="course",u="asc";s.classList.remove("active"),e.classList.add("active"),n(o,l,i,u);break;case a:o=s.classList.contains("active")?"current":"past";l=0,i="course";"asc"==a.getAttribute("data-value")?(u="desc",a.setAttribute("data-value","desc"),a.classList.add("th-sort-desc"),a.classList.remove("th-sort-asc")):(u="asc",a.setAttribute("data-value","asc"),a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc")),n(o,l,i,u);break;case c:o="current",l=0,i="date";"asc"==c.getAttribute("data-value")?(u="desc",c.setAttribute("data-value","desc"),c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc")):(u="asc",c.setAttribute("data-value","asc"),c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc")),n(o,l,i,u);break;case r:o="past",l=0,i="startdate";"asc"==r.getAttribute("data-value")?(u="desc",r.setAttribute("data-value","desc"),r.classList.add("th-sort-desc"),r.classList.remove("th-sort-asc")):(u="asc",r.setAttribute("data-value","asc"),r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc")),n(o,l,i,u);break;case d:o="past",l=0,i="enddate";"asc"==d.getAttribute("data-value")?(u="desc",d.setAttribute("data-value","desc"),d.classList.add("th-sort-desc"),d.classList.remove("th-sort-asc")):(u="asc",d.setAttribute("data-value","asc"),d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc")),n(o,l,i,u)}},c=t=>{var s=document.getElementById("menu_current_assessments_sortby"),e=document.getElementById("menu_past_assessments_sortby"),a=document.getElementById("sortby_course"),c=document.getElementById("sortby_date"),r=document.getElementById("sortby_startdate"),d=document.getElementById("sortby_enddate");switch(t.target){case s:var o="current",l=0,i=s.value,u="asc";"course"===s.value?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")),n(o,l,i,u);break;case e:o="past",l=0,i=e.value,u="asc";"course"===e.value?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):"startdate"===e.value?(r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc"),r.setAttribute("data-value","asc")):(d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc"),d.setAttribute("data-value","asc")),n(o,l,i,u)}};const n=(t,s,e,a)=>{var c=document.getElementById("assessments_details_contents");r.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:t,page:s,sortby:e,sortorder:a}}])[0].done(function(t){c.innerHTML=t.result,o(),d(e,a)}).fail(function(t){c.innerHTML=t.message})},d=(t,s)=>{var e=document.getElementById("sortby_course"),a=document.getElementById("sortby_date"),c=document.getElementById("sortby_startdate"),r=document.getElementById("sortby_enddate");switch(t){case"course":e&&("asc"===s?(e.classList.add("th-sort-asc"),e.classList.remove("th-sort-desc"),e.setAttribute("data-value","asc")):(e.classList.add("th-sort-desc"),e.classList.remove("th-sort-asc"),e.setAttribute("data-value","desc")));break;case"date":a&&("asc"===s?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):(a.classList.add("th-sort-desc"),a.classList.remove("th-sort-asc"),a.setAttribute("data-value","desc")));break;case"startdate":c&&("asc"===s?(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")):(c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc"),c.setAttribute("data-value","desc")));break;case"enddate":r&&("asc"===s?(r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc"),r.setAttribute("data-value","asc")):(r.classList.add("th-sort-desc"),r.classList.remove("th-sort-asc"),r.setAttribute("data-value","desc")))}},o=()=>{for(var t=document.querySelectorAll("#assessments_details_contents .page-item a.page-link"),s=0;s<t.length;s++)t[s].addEventListener("click",t=>{t.preventDefault();var s=new URL(t.target.getAttribute("href")),e=new URLSearchParams(s.search),a=e.get("activetab"),t=e.get("page"),s=e.get("sortby"),e=e.get("sortorder");n(a,t,s,e)})};return{init:function(){const t=document.querySelector(".assessments-details-container");var s,e;t&&(s=document.getElementById("current_tab"),e=document.getElementById("past_tab"),s.classList.add("active"),e.classList.remove("active"),n("current",0,"course","asc"),t.addEventListener("change",c),t.addEventListener("click",a))}}});
